<html>
<head>

<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"> </script>

  <script>
  // Function to display serialized and tabular JSON data 
  $(function() {
     var setlist = [];
     $.getJSON('setlist.json', function(data) {
         $.each(data.songs, function(i, f) {
            var raw = f;
            var serial = JSON.stringify(raw);
            $("#serialized").append(serial + '<br>');

            var tabular = "<tr>" + "<td>" + f.title + "</td>" +
            "<td>" + f.artist + "</td>" + "<td>" + f.year + "</td>" + "<td>" + f.genre + "</td>" + "</tr>";
            $(tabular).appendTo("#tableid tbody");
        
       });
     });
  });
  </script>

</head>

<body>

  <h2>Part 1: Create a JSON</h2>
    <a href="setlist.json"> setlist.json </a>
  
  <h2>Part 2: Serialize and Display</h2>
<!--   <h4>Songs:</h4> -->
      <div id="serialized"></div>

  <h2>Part 3: User Friendly Display</h2>

    <div>
    <div>
         <table id= "tableid"  border="3">
        <thead>
                  <th>Title</th>
                  <th>Artist</th>
                  <th>Year</th>
                  <th>Genre</th>
              </thead>
            <tbody>
            </tbody>
         </table>
      </div>
    </div>



  <h2>Part 4: Filter the Data</h2>
  <form>
    <select id="genre" name="songs">
      <option value="Rap">Rap</option>
      <option value="Gospel">Gospel</option>
      <option value="Alternative">Alternative</option>
      <option value="Trap">Trap</option>
      <option value="Hip-Hop">Hip-Hop</option>
      <option value="Alternative Rock">Alternative Rock</option>
    </select>
    <br><br>
    <input type="submit" value="Show me the songs!">
  </form>

</body>

  <script>

  // Function to query for songs in selected genre, returns their titles 
  function find_songs(genre){
      var genre_songs = [];
      $.getJSON('setlist.json', function(data) {
         $.each(data.songs, function(i, f) {
            if(f.genre == genre){
              var title = f.title;
              genre_songs.push(title);
            }
            return genre_songs;
       });
     });
  }

  // Get genre selection from dropdown form
  var genre = document.getElementById("genre");
  var result = genre.options[genre.selectedIndex].value;
  console.log(result);
  // var genre_songs = find_songs(genre);
  // console.log(genre_songs);

  </script>

</html>